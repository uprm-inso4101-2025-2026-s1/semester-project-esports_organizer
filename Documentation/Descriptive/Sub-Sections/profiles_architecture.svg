<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="700" viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style type="text/css"><![CDATA[
      .box { fill: #ffffff; stroke: #333333; stroke-width: 2; rx: 10; ry: 10; }
      .title { font-family: Arial, Helvetica, sans-serif; font-size: 20px; font-weight: bold; fill: #111111; }
      .label { font-family: Arial, Helvetica, sans-serif; font-size: 16px; fill: #111111; }
      .edge { stroke: #333333; stroke-width: 2; marker-end: url(#arrow); fill: none; }
      .edgeText { font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: #111111; }
      .note { font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: #444444; }
    ]]></style>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5"
            markerUnits="strokeWidth" markerWidth="10" markerHeight="10" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333333" />
    </marker>
  </defs>

  <text x="600" y="40" text-anchor="middle" class="title">Profiles Module Architecture (Milestone 2)</text>

  <rect x="80"  y="120" width="280" height="90" class="box"/>
  <text x="220" y="150" text-anchor="middle" class="label">React Client (UI)</text>
  <text x="220" y="175" text-anchor="middle" class="note">Users interact, send requests</text>

  <rect x="460" y="120" width="300" height="110" class="box"/>
  <text x="610" y="155" text-anchor="middle" class="label">Node.js / Express</text>
  <text x="610" y="180" text-anchor="middle" class="note">Profiles API (REST)</text>

  <rect x="900" y="110" width="240" height="90" class="box"/>
  <text x="1020" y="145" text-anchor="middle" class="label">Firebase Auth</text>
  <text x="1020" y="170" text-anchor="middle" class="note">ID Token verification</text>

  <rect x="900" y="310" width="240" height="90" class="box"/>
  <text x="1020" y="345" text-anchor="middle" class="label">Firestore</text>
  <text x="1020" y="370" text-anchor="middle" class="note">profiles collection</text>

  <rect x="460" y="320" width="300" height="90" class="box"/>
  <text x="610" y="355" text-anchor="middle" class="label">Privacy Control Module</text>
  <text x="610" y="380" text-anchor="middle" class="note">Toggle / Read visibility</text>

  <rect x="80"  y="320" width="280" height="90" class="box"/>
  <text x="220" y="355" text-anchor="middle" class="label">Badge Module</text>
  <text x="220" y="380" text-anchor="middle" class="note">Assign / Read badges</text>

  <path d="M360,165 L460,165" class="edge"/>
  <text x="410" y="155" text-anchor="middle" class="edgeText">REST /profiles, /profiles/:id</text>

  <path d="M320,120 L960,120" class="edge"/>
  <text x="640" y="110" text-anchor="middle" class="edgeText">Login / Token</text>

  <path d="M760,165 L900,155" class="edge"/>
  <text x="835" y="145" text-anchor="middle" class="edgeText">Verify ID token</text>

  <path d="M760,205 C860,220 940,270 1020,310" class="edge"/>
  <text x="900" y="260" text-anchor="middle" class="edgeText">CRUD save/get/update</text>

  <path d="M380,365 L460,365" class="edge"/>
  <text x="420" y="355" text-anchor="middle" class="edgeText">Assign / Read</text>

  <path d="M760,365 L900,355" class="edge"/>
  <text x="835" y="345" text-anchor="middle" class="edgeText">Toggle / Read</text>

  <path d="M220,410 C220,470 1020,470 1020,400" class="edge"/>
  <text x="620" y="465" text-anchor="middle" class="edgeText">Store / Query</text>

  <path d="M610,410 C610,460 1020,460 1020,400" class="edge"/>
  <text x="815" y="445" text-anchor="middle" class="edgeText">Store / Query</text>

  <rect x="80" y="520" width="460" height="120" class="box"/>
  <text x="100" y="550" class="label">Legend</text>
  <text x="100" y="575" class="note">• Solid arrows indicate request/response or data flow</text>
  <text x="100" y="600" class="note">• React → Express: REST calls (/profiles)</text>
  <text x="100" y="625" class="note">• Express → Firestore: CRUD operations on 'profiles'</text>
</svg>
